<!DOCTYPE html>
<html lang="en">
<head>
    <link href="preview.css" rel="stylesheet"/>
    <meta charset="UTF-8">
    <title>Magikaltura</title>
    <link rel="shortcut icon" href="https://corp.kaltura.com/sites/default/files/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="./fonts/FontAwesome/css/font-awesome.min.css">
</head>
<body>

<div id="kaltura_player" style="width: 100%; height: 100vh;" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"></div>
<div class="header" id="header">
    <img src="logo.png" width="60px" height="55px" class="logo">
    <div class="verticalLine"></div>
    <span class="title bebas-neue">Magikaltura</span>
    <div class="header-right">
        <span class="email" onclick="sendMail()">Contact@Hackathon-winners.com</span>
        <i class="share fa fa-twitter" onclick="share('twitter')" title="Share to Twitter"></i>
        <i class="share fa fa-linkedin" onclick="share('linkedin')" title="Share to LinkedIn"></i>
        <i class="share fa fa-facebook" onclick="share('facebook')" title="Share to Facebook"></i>
        <i class="share fa fa-google-plus" onclick="share('googleplus')" title="Share to Google Plus"></i>
        <i class="share fa fa-envelope" onclick="share('email')" title="Share via Email" style="margin-right: 60px"></i>
    </div>
    <i class="fa fa-window-minimize toggleHeader" onclick="toggleHeader()" title="Toggle Header"></i>
</div>

<script>
	var kdp;
	var headerOpen = true;
	// get params
	var url = new URL(window.location.href);
	var entryId = url.searchParams.get("entryId");
	var pid = url.searchParams.get("pid");
	var uiconfId = url.searchParams.get("uiconfId");
	var scriptSrc = "https://cdnapisec.kaltura.com/p/"+pid+"/sp/"+pid+"00/embedIframeJs/uiconf_id/"+uiconfId+"/partner_id/"+pid;
	var script = document.createElement('script');
	var videoHeight = window.innerWidth * 9 / 16;
	document.getElementById("kaltura_player").style.height = videoHeight + "px";
	script.onload = function () {
		kWidget.embed({
			"targetId": "kaltura_player",
			"wid": "_"+pid,
			"uiconf_id": uiconfId,
			"readyCallback": function(player){
				kdp = document.getElementById(player);
			},
			"flashvars": {
				"largePlayBtn.plugin": false,
				"autoPlay": true,
				"autoMute": true,
				"loop": true,
				"controlBarContainer.plugin": false,
				"topBarContainer.plugin": false,
				"share.plugin": true,
				"disableOnScreenClick": true
			},
			"cache_st": 1514888096,
			"entry_id": entryId
		});
	};
	script.src = scriptSrc;
	document.head.appendChild(script);

	function sendMail(){
		opener = window.open('mailto:all@kaltura.com?subject=Hackathon winners announced!&body=MagiKaltura Wins!');
		setTimeout(function(){
			opener.close();
		},1000);
	}

	function share(platform){
		if (kdp){
			kdp.sendNotification("shareByPlatform",[platform]);
		}
	}

	function toggleHeader(){
		headerOpen = !headerOpen;
		var top = headerOpen ? 0 : -84;
		document.getElementById("header").style.top = top + "px";
	}
</script>

</body>
</html>