<div class="vAddCategory vTreeContainer vOverrideFAIcons">
	<div class="vHeader">
		<span class="vTitle">{{'applications.content.entryDetails.metadata.selectCategories' | translate}}</span>
	</div>

	<div class="vTagsContainer" [class.vLocked]="_categoriesLocked">
		<span *ngIf="_categoriesLocked">{{'applications.content.categories.categoriesLockMsg' | translate}}</span>
		<span class="vSelectCategoriesMsg" *ngIf="!_selectedCategories.length && !_categoriesLocked">{{'applications.content.entryDetails.metadata.catSelect' | translate}}</span>
		<div *ngIf="_categoriesUpdating && !_selectedCategories.length && !_categoriesLocked" class="v-spinner-background vSpinnerBkg" vTooltip="{{'applications.content.categories.categoriesUpdateMsg' | translate}}">
			<div class="v-spinner-animation vSpinnerAnim"></div>
		</div>
		<vTags #tags *ngIf="_selectedCategories?.length" [data]="_selectedCategories" [labelField]="'name'"  (onTagRemove)="_removeTag($event)" (onRemoveAll)="_removeAllTag()" [clearAllLabel]="'applications.content.filters.clearAll' | translate">
			<ng-template let-item="item">
				<div class="vTagContent" [vTooltip]="item.data | vCategoryTooltip">
					<span class="vTagLabel">{{item.label}}</span>
					<i *ngIf="item.showRemove" class="vTagRemove vIconclose_small" (click)="_removeTag(item.data)"></i>
				</div>
			</ng-template>
		</vTags>
	</div>
	<div class="vMain" [class.vLocked]="_categoriesLocked">
		<vAutoComplete #autoComplete
					   [disabled]="!_categoriesLoaded || _categoriesLocked"
					   [multiple]="false"
					   field="name"
					   suggestionItemField="item"
					   suggestionLabelField="name"
					   suggestionSelectableField="isSelectable"
					   placeholder="{{'applications.entries.entryMetadata.searchCategoriesPH' | translate}}"
					   [minLength]="3"
					   (onSelect)="_onAutoCompleteSelected()"
					   [suggestionsProvider]="_categoriesProvider"
					   (completeMethod)="_onAutoCompleteSearch($event)">
		</vAutoComplete>


		<v-categories-tree #categoriesTree
						   [(selectedCategories)]="_treeSelection"
						   (onCategoriesLoaded)="_onTreeCategoriesLoad($event)"
						   (onCategorySelected)="_onCategorySelected($event)"
						   (onCategoryUnselected)="_onCategoryUnselected($event)"></v-categories-tree>
	</div>

    <div class="vFooter" [class.vLocked]="_categoriesLocked">
        <button class="vButtonBranded" pButton label="{{buttonLabel}}" (click)="_apply()"></button>
    </div>
</div>
