<k-area-blocker [showLoader]="_isLoading" [message]="_blockerMessage">
    <div class="kMatchDropFolder">
        <div class="kHeader">
            <h1>{{'applications.content.entryDetails.flavours.replaceVideo.matchFromDropFolder' | translate}}</h1>
        </div>
        <div class="kMatchDropFolderContent">
            <div class="kMatchDropFolderControls">
                <span class="kMatchDropFolderControlsLabel">
                    {{'applications.content.entryDetails.flavours.replaceVideo.selectDropFolder' | translate}}
                </span>
                <p-dropdown class="kDropFoldersList"
                            [options]="_dropFoldersListOptions"
                            [autoWidth]="false"
                            (onChange)="_loadFolderData()"
                            [(ngModel)]="_selectedDropFolder">
                    <ng-template let-profile pTemplate="item">
                        <span class="kDropFoldersListItem" [kTooltip]="profile.label">{{profile.label}}</span>
                    </ng-template>
                </p-dropdown>

                <input pInputText
                       class="kDropFolderSearch"
                       [placeholder]="'applications.content.entryDetails.flavours.replaceVideo.searchFolder' | translate">

                <button pButton class="kButtonDefault kRefreshBtn small"
                        type="text"
                        icon="kIconrefresh"
                        (click)="_loadFolderData()"></button>
            </div>
            <div class="kMatchDropFolderReferenceId">
                <span>{{'applications.content.entryDetails.flavours.replaceVideo.referenceId' | translate}}</span>&nbsp;
                {{entry?.referenceId
                ? entry?.referenceId
                : ('applications.content.entryDetails.flavours.replaceVideo.na' | translate)}}
            </div>
            <div class="kMatchDropFolderTable">
                <p-table dataKey="displayName"
                         [scrollable]="true"
                         scrollHeight="208px"
                         [value]="_dropFolderFiles"
                         [(selection)]="_selectedFile">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th style="width: 44px"></th>
                            <th>
                                {{'applications.content.entryDetails.flavours.replaceVideo.mediaPackageName' | translate}}
                            </th>
                            <th style="width: 200px">
                                {{'applications.content.entryDetails.flavours.replaceVideo.createdOn' | translate}}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-file let-columns="columns">
                        <tr [pSelectableRow]="file">
                            <td style="width: 44px">
                                <p-tableRadioButton [value]="file"></p-tableRadioButton>
                            </td>
                            <td class="kFileName">{{file?.displayName}}</td>
                            <td class="kCreatedAt" style="width: 200px">{{file?.createdAt | kDate:'dateOnly'}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="kFooter">
            <button class="kButtonDefault kUploadButton" pButton
                    [label]="'applications.content.entryDetails.flavours.replaceVideo.cancel' | translate"
                    (click)="parentPopupWidget?.close()"></button>
            <button class="kButtonBranded kUploadButton" pButton
                    [label]="'applications.content.entryDetails.flavours.replaceVideo.setReferenceId' | translate"></button>
            <button class="kButtonBranded kUploadButton" pButton
                    [label]="'applications.content.entryDetails.flavours.replaceVideo.addFilesBtn' | translate"></button>
        </div>
    </div>
</k-area-blocker>
