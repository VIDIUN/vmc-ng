<k-area-blocker [showLoader]="(_usersStore.users.state$ | async)?.loading || this._deferredLoading"
                [message]="_blockerMessage">
    <div class="kUsersTable" [class.noResults]="!_users?.length">
        <p-table kStickyHeader sticksTo="usersFilters" stickyClass="stickyHeader" stickyId="rolesTable"
                 dataKey="id"
                 [value]="_users"
                 [scrollable]="true"
                 [resizableColumns]="true"
                 scrollHeight="100%"
                 [rowTrackBy]="_rowTrackBy">
            <ng-template pTemplate="colgroup" let-columns>
                <colgroup>
                    <col [ngStyle]="{'width': '350px', 'padding-left': '1.5em'}">
                    <col>
                    <col>
                    <col>
                    <col [ngStyle]="{'padding-left': '14px', 'width': '100px'}">
                    <col>
                    <col [ngStyle]="{'overflow': 'hidden', 'width': '80px'}">
                </colgroup>
            </ng-template>

            <ng-template pTemplate="header">
                <tr>
                    <th pResizableColumn [ngStyle]="{'width': '350px', 'padding-left': '1.5em'}">
                        {{'applications.content.table.userName' | translate}}
                    </th>
                    <th pResizableColumn>{{'applications.content.table.userId' | translate}}</th>
                    <th pResizableColumn>{{'applications.content.table.emailAddress' | translate}}</th>
                    <th pResizableColumn>{{'applications.content.table.role' | translate}}</th>
                    <th pResizableColumn [ngStyle]="{'padding-left': '14px', 'width': '100px'}">
                        {{'applications.content.table.status' | translate}}
                    </th>
                    <th>{{'applications.content.table.lastLogin' | translate}}</th>
                    <th [ngStyle]="{'overflow': 'hidden', 'width': '80px'}"></th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-user>
                <tr>
                    <td class="ui-resizable-column" [ngStyle]="{'width': '350px', 'padding-left': '1.5em'}">
                        <span class="kTableColumn kFullName" [kTooltip]="user.fullName">{{user.fullName}}</span>
                        <i *ngIf="(user | accountOwner)" class="kIconuser kIconOwner"
                           [kTooltip]="user | accountOwner"></i>
                    </td>
                    <td class="ui-resizable-column">
                        <span class="kTableColumn" [kTooltip]="user.id">{{user.id}}</span>
                    </td>
                    <td class="ui-resizable-column">
                        <span class="kTableColumn" [kTooltip]="user.email">{{user.email}}</span>
                    </td>
                    <td class="ui-resizable-column">
                        {{user.roleIds | kRoleName:(_usersStore.users.data$ | async)?.roles.items}}
                    </td>
                    <td class="ui-resizable-column" [ngStyle]="{'padding-left': '14px', 'width': '100px'}">
                        <span class="kTableColumn">{{user.status | status}}</span>
                    </td>
                    <td>
                        {{(user.lastLoginTime * 1000)| kDate}}
                    </td>
                    <td [ngStyle]="{'overflow': 'hidden', 'width': '80px'}">
                        <div class="kUsersTableActions">
                            <button type="button" pButton icon="kIconmore" class="kMoreActionsButton"
                                    (click)="_openActionsMenu($event, user)"></button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-menu #actionsmenu popup="popup" [model]="_items" [appendTo]="'body'"></p-menu>
    </div>

</k-area-blocker>
