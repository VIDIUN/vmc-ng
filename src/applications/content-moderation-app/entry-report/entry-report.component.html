<v-area-blocker [message]="_areaBlockerMessage" [showLoader]="_isBusy">
  <div class="vEntryReportWrap vOverrideFAIcons">
    <div class="vHeader">
      <span class="vTitle">{{('applications.content.moderation.entryReports') | translate}}</span>

      <div class="vButtons">
        <a class="cancelLink" (click)="_closePopup()">{{'app.common.cancel' | translate}}</a>
        <button
          pButton
          type="button"
          [label]="'applications.content.moderation.approveEntry' | translate"
          (click)="_approveEntry()"
          *ngIf="_vmcPermissions.CONTENT_MODERATE_APPROVE_REJECT | vNgIfPermitted"
          class="vButtonBranded vApproveEntryBtn"></button>

        <button
          pButton
          type="button"
          [label]="'applications.content.moderation.rejectEntry' | translate"
          (click)="_rejectEntry()"
          *ngIf="_vmcPermissions.CONTENT_MODERATE_APPROVE_REJECT | vNgIfPermitted"
          class="vButtonDefault vRejectEntryBtn"></button>
      </div>
    </div>

    <div class="vContainer">
      <div class="vFrame">
        <v-player #player [cdnUrl]="serverUri" [pid]="_playerConfig.pid" [uiconfid]="_playerConfig.uiconfid" [entryid]="_playerConfig.entryid" [flashvars]="_playerConfig.flashvars" [width]="340" [height]="190" [lazy]="true"></v-player>
      </div>

      <div class="appSubMenu">
        <div *ngFor="let tab of _tabs; let i = index;"
             class="subMenuContainer"
             [class.active]="tab.isActive"
             (click)="_changeTab(i)">
          <a class="menuLink">{{tab.name}}</a>
          <div class="linkMarker"></div>
        </div>
      </div>
      <div>
        <div class="vEntryReport" *ngIf="_tabs[EntryReportSections.Report].isActive && !_tabs[EntryReportSections.Report].disabled">
          <div class="vFlagsAmount">{{_flagsAmount}}</div>
          <div class="vFlagsComment" *ngFor="let flag of _flags;">
            <div class="vFlagsCaption">
              <div class="vIconReport"></div>
              {{flag.flagType | vFlagType}}
            </div>
            <div class="vFlagsDate">{{flag.createdAt | vmcDate}}</div>
            <div class="vFlagsText">{{flag.comments}}</div>
          </div>
        </div>

        <div class="vEntryDetails" *ngIf="_tabs[EntryReportSections.Details].isActive && !_tabs[EntryReportSections.Details].disabled">
          <div class="vRow">
            <span class="vLabels">{{'applications.content.moderationDetails.name' | translate}}</span>
            <span>{{_entry.name}}</span>
          </div>
          <div class="vRow">
            <span class="vLabels">{{'applications.content.moderationDetails.entryId' | translate}}</span>
            <a *ngIf="_isEntryLinkAvailable" (click)="_navigateToEntry(_entry.id)">{{_entry.id}}</a>
            <span *ngIf="!_isEntryLinkAvailable">{{_entry.id}}</span>
          </div>
          <div class="vRow" *ngIf="_hasDuration">
            <span class="vLabels">{{'applications.content.moderationDetails.duration' | translate}}</span>
            <span>{{_entry.duration | vTime}}</span>
          </div>
          <div class="vRow" *ngIf="_isEntryReady">
            <span class="vLabels">{{'applications.content.moderationDetails.plays' | translate}}</span>
            <span>{{_entry.plays}}</span>
          </div>
          <div class="vRow">
            <span class="vLabels">{{'applications.content.moderationDetails.moderationStatus' | translate}}</span>
            <span>{{_entry.moderationStatus | vModerationStatus}}</span>
          </div>
          <div class="vRow" *ngIf="_isClip">
            <span class="vLabels">{{'applications.content.moderationDetails.clippedFrom' | translate}}</span>
            <a *ngIf="_isEntryLinkAvailable" (click)="_navigateToEntry(_entry.rootEntryId)">{{_entry.rootEntryId}}</a>
            <span *ngIf="!_isEntryLinkAvailable">{{_entry.rootEntryId}}</span>
          </div>
          <div class="vRow">
            <span class="vLabels">{{'applications.content.moderationDetails.creator' | translate}}</span>
            <span [vTooltip]="_entry.creatorId">{{_entry.creatorId}}</span>
            <button
              pButton
              type="button"
              label="{{'applications.content.moderation.banCreator' | translate}}"
              (click)="_banCreator()"
              class="vButtonDefault vBanCreatorBtn"></button>
          </div>
        </div>
      </div>
    </div>
  </div>
</v-area-blocker>
