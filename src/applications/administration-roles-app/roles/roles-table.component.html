<k-area-blocker kFillHeight [showLoader]="(rolesService.state$ | async)?.loading || this._deferredLoading" [message]="_blockerMessage">
  <div class="kRolesTable" [class.noResults]="!_roles.length">
    <p-dataTable #dataTable [value]="_roles"
      scrollable="true" scrollHeight="100%" dataKey="id" [rowTrackBy]="rowTrackBy"
      [(selection)]="selectedRoles" emptyMessage="{{_emptyMessage}}">
      <p-column [style]="{'padding-left': '14px','width':'130px'}" field="name" header="Name" [sortable]="false">
        <ng-template let-col let-role="rowData" pTemplate="body">
          <span [kTooltip]="role.name" class="kTitle" (click)="onActionSelected('edit',role.id)">
            {{role[col.field]}}</span>
        </ng-template>
      </p-column>
      <p-column field="description" header="Description" [sortable]="false" [style]="{'width':'250px'}"></p-column>
      <p-column field="updatedAt" header="Saved at"  [sortable]="false" [style]="{'width':'60px'}">
        <ng-template let-col let-role="rowData" pTemplate="body">
          <span>{{role[col.field] | kDate}}</span>
        </ng-template>
      </p-column>
      <p-column  header="" [style]="{'overflow':'visible', 'width':'80px'}" [sortable]="false">
        <ng-template let-col let-role="rowData" pTemplate="body">
          <div class="kRolesTableActions" *ngIf="role.partnerId != 0">
            <button type="button" pButton icon="kIconmore" (click)="openActionsMenu($event, role)"></button>
          </div>
        </ng-template>
      </p-column>
    </p-dataTable>
    <p-menu #actionsmenu popup="popup" [model]="_items" [appendTo]="'body'"></p-menu>
  </div>
</k-area-blocker>
