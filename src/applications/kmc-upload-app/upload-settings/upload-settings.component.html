<div class="kUploadSettings">
  <div class="kHeader">
    <h1>{{ 'app.upload.uploadSettings.title' | translate }}</h1>
  </div>
  <div class="kContent">
    <form [formGroup]="_profileForm" class="kProfile">
      <span>{{ 'app.upload.uploadSettings.profile' | translate }}</span>
      <p-dropdown class="kTranscodingProfile"
                  kDropdownCloseOnScroll
                  [options]="_transcodingProfiles"
                  [appendTo]="'body'"
                  [autoWidth]="false"
                  [placeholder]="'app.upload.uploadSettings.profilePlaceholder' | translate"
                  [formControl]="_transcodingProfileField">
      </p-dropdown>
      <span *ngIf="_transcodingProfileError" class="kTranscodingProfileError">{{ _transcodingProfileError }}</span>
    </form>

    <div class="kAddFile">
      <button type="button"
              class="kButtonDefault kAddFileButton"
              pButton
              [label]="'app.upload.uploadSettings.addFileBtn' | translate"
              (click)="fileDialog.open()"></button>
    </div>

    <div class="kTable" [class.empty]="_files.length === 0">
      <p-dataTable [value]="_files"
                   [emptyMessage]="'app.upload.uploadSettings.table.emptyMessage.title' | translate"
                   scrollable="true"
                   scrollHeight="287px">
        <p-column field="name" [sortable]="false"
                  [header]="'app.upload.uploadSettings.table.header.fileName' | translate">
        </p-column>
        <p-column field="type"
                  [sortable]="false"
                  [style]="{ 'width': '150px' }"
                  [header]="'app.upload.uploadSettings.table.header.mediaType' | translate">
          <ng-template let-col let-file="rowData" pTemplate="body">
            <p-dropdown kDropdownCloseOnScroll
                        [options]="_fileTypes"
                        [appendTo]="'body'"
                        [autoWidth]="false"
                        [(ngModel)]="file.mediaType"
                        placeholder="{{'applications.content.entryDetails.related.select' | translate}}"></p-dropdown>
          </ng-template>
        </p-column>
        <p-column field="size"
                  [sortable]="false"
                  [style]="{ 'width': '80px' }"
                  [header]="'app.upload.uploadSettings.table.header.size' | translate">
          <ng-template let-col let-file="rowData" pTemplate="body">
            <span>{{ file.size | kFileSize }}</span>
          </ng-template>
        </p-column>
        <p-column [style]="{ 'width': '45px', 'text-align': 'center' }">
          <ng-template let-col let-file="rowData" pTemplate="body">
            <i class="kIcontrash kIconRemoveFile"
               [kTooltip]="'app.upload.uploadSettings.table.remove' | translate"
               placement="top"
               (click)="_removeFile(file)"></i>
          </ng-template>
        </p-column>
      </p-dataTable>
      <div *ngIf="_files.length === 0" class="kEmptyMessage">
        <h1>{{ 'app.upload.uploadSettings.table.emptyMessage.title' | translate }}</h1>
        <p>
          {{ 'app.upload.uploadSettings.table.emptyMessage.getStarted' | translate }}
          <a (click)="fileDialog.open()">{{ 'app.upload.uploadSettings.table.emptyMessage.browse' | translate }}</a>
        </p>

      </div>
    </div>
  </div>
  <div class="kFooter">
    <button class="kButtonDefault kUploadButton"
            pButton
            [label]="'app.upload.uploadSettings.uploadBtn' | translate"></button>
  </div>
</div>
<kFileDialog #fileDialog
             [allowMultiple]="true"
             (onFileSelected)="onFileSelected.emit($event)"></kFileDialog>
