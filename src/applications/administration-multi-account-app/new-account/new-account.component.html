<v-area-blocker [showLoader]="_isBusy" [message]="_blockerMessage">
  <div class="vFloater vOverrideFAIcons">
    <div class="vHeader">
      <div class="vTitle">
        <span>{{'applications.administration.accounts.addAccount' | translate}}</span>
      </div>
    </div>

    <div class="vContainer">
      <form [formGroup]="_accountForm" novalidate>
        <div class="vCaption">{{'applications.administration.accounts.accountInfo' | translate}}</div>

          <div class="vRow vValign">
              <span class="vLabel">{{'applications.administration.accounts.administrator' | translate}}</span>
              <div class="vRequired" [ngClass]="{'vHasError': _adminField.invalid && _adminField.touched}">*</div>
              <div class="vControl">
                  <input [formControl]="_adminField" type="text" pInputText/>
              </div>
          </div>
          <div class="vErrorRow" *ngIf="_adminField.invalid && _adminField.touched">
              <div class="invalid">{{'applications.administration.accounts.errors.required' | translate}}</div>
          </div>

          <div class="vRow vValign">
              <span class="vLabel">{{'applications.administration.accounts.name' | translate}}</span>
              <div class="vRequired" [ngClass]="{'vHasError': _nameField.invalid && _nameField.touched}">*</div>
              <div class="vControl">
                  <input [formControl]="_nameField" type="text" pInputText/>
              </div>
          </div>
          <div class="vErrorRow" *ngIf="_nameField.invalid && _nameField.touched">
              <div class="invalid">{{'applications.administration.accounts.errors.required' | translate}}</div>
          </div>

          <div class="vRow vValign">
          <span class="vLabel">{{'applications.administration.accounts.email' | translate}}</span>
          <div class="vRequired"
               [ngClass]="{'vHasError':(_emailField.invalid && _emailField.touched) || (_emailServerError && _emailField.pristine)}">
              *
          </div>
          <div class="vControl">
            <input [formControl]="_emailField"
                   [ngClass]="{'vHasError': (_emailField.invalid && _emailField.touched) || (_emailServerError && _emailField.pristine)}"
                   type="text" pInputText/>
          </div>
        </div>
        <div class="vErrorRow" *ngIf="_emailField.invalid && _emailField.touched && !_emailServerError">
          <div class="invalid" *ngIf="_emailField.value === ''">
            {{'applications.administration.accounts.errors.required' | translate}}
          </div>
          <div class="invalid" *ngIf="_emailField.value !== ''">
            {{'applications.administration.accounts.errors.emailFormat' | translate}}
          </div>
        </div>
          <div class="vErrorRow" *ngIf="_emailField.invalid && _emailField.touched && _emailServerError">
              <div class="invalid" *ngIf="_emailField.value !== ''">
                  {{'applications.administration.accounts.emailExists' | translate}}
              </div>
          </div>

          <div class="vRow vValign">
              <span class="vLabel">{{'applications.administration.accounts.phone' | translate}}</span>
              <div class="vRequired" [ngClass]="{'vHasError': _phoneField.invalid && _phoneField.touched}">*</div>
              <div class="vControl">
                  <input [formControl]="_phoneField" type="text" pInputText/>
              </div>
          </div>

          <div class="vErrorRow" *ngIf="_phoneField.invalid && _phoneField.touched">
              <div class="invalid">{{'applications.administration.accounts.errors.required' | translate}}</div>
          </div>

          <div class="vRow vValign">
              <span class="vLabel vExtraWidth">{{'applications.administration.accounts.website' | translate}}</span>
              <div class="vControl">
                  <input [formControl]="_websiteField" type="text" pInputText/>
              </div>
          </div>

          <div class="vRow vValign">
              <span class="vLabel vExtraWidth">{{'applications.administration.accounts.template' | translate}}</span>
              <div class="vControl">
                  <p-dropdown styleClass="templatesList"
                              [options]="_templatesList"
                              [formControl]="_templateField"
                              [autoWidth]="false"
                              (onChange)="this._templateSelected($event)"></p-dropdown>
              </div>
          </div>

          <div class="vRow vValign">
              <span class="vLabel vExtraWidth">{{'applications.administration.accounts.refid' | translate}}</span>
              <div class="vControl">
                  <input [formControl]="_refidField" type="text" pInputText/>
              </div>
          </div>

      </form>
    </div>

    <div class="vFooter">
      <button type="button" class="vButtonBranded"
              [disabled]="!_accountForm.dirty" pButton
              [label]="'applications.administration.accounts.create' | translate"
              (click)="createNewAccount()"></button>
        <span class="vNote"><span>{{'app.common.note' | translate}}</span>{{'applications.administration.accounts.note' | translate}}</span>
    </div>

  </div>
</v-area-blocker>
