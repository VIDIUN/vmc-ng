<k-area-blocker [message]="blockerMessage">
  <div class="kEditWin">
    <form [formGroup]="_changePasswordForm" novalidate>
      <div class="kHeader">
        <span class="kTitle">{{'applications.settings.myUserSettings.changePassword' | translate}}</span>
      </div>

      <div class="kContainer">
        <div class="kStrongPassword">{{'applications.settings.myUserSettings.strongPassword' | translate}}</div>
        <div class="kRow">
          <span class="kLabel">{{'applications.settings.myUserSettings.currentPassword' | translate}}</span>
          <div>
            <input type="password"
                   class="kControl"
                   formControlName="currentPassword"
                   pInputText
                   [ngClass]="{'kHasError':!_changePasswordForm.controls['currentPassword'].valid && _changePasswordForm.controls['currentPassword'].touched}">
            <div *ngIf="_changePasswordForm.controls['currentPassword'].touched && _changePasswordForm.controls['currentPassword'].hasError('required')"
              class="error">
              {{'applications.settings.myUserSettings.errors.required' | translate}}
            </div>
          </div>
        </div>
        <div class="kRow">
          <span class="kLabel">{{'applications.settings.myUserSettings.newPassword' | translate}}</span>
          <div>
            <input type="password"
                   class="kControl"
                   formControlName="newPassword"
                   pInputText
                   [ngClass]="{'kHasError':!_changePasswordForm.controls['newPassword'].valid && _changePasswordForm.controls['newPassword'].touched}">
            <div *ngIf="_changePasswordForm.controls['newPassword'].touched && _changePasswordForm.controls['newPassword'].hasError('required')"
              class="error">
              {{'applications.settings.myUserSettings.errors.required' | translate}}
            </div>
          </div>
        </div>
        <div class="kRow">
          <span class="kLabel">{{'applications.settings.myUserSettings.reTypeNewPassword' | translate}}</span>
          <div>
            <input type="password"
                   class="kControl"
                   formControlName="reTypeNewPassword"
                   pInputText
                   [ngClass]="{'kHasError':!_changePasswordForm.controls['reTypeNewPassword'].valid && _changePasswordForm.controls['reTypeNewPassword'].touched}">
            <div *ngIf="_changePasswordForm.controls['reTypeNewPassword'].touched && _changePasswordForm.controls['reTypeNewPassword'].hasError('required')"
              class="error">
              {{'applications.settings.myUserSettings.errors.required' | translate}}
            </div>
            <div *ngIf="_changePasswordForm.controls['reTypeNewPassword'].touched && _passwordMatchValidator(_changePasswordForm.controls['reTypeNewPassword'])"
              class="error">
              {{'applications.settings.myUserSettings.errors.doNotMuchPasswords' | translate}}
            </div>
          </div>
        </div>
      </div>

      <div class="kFooter">
        <button pButton class="kButtonDefault kButton" (click)="_closePopup()"
                [label]="'applications.settings.myUserSettings.cancel' | translate"></button>
        <button
          pButton class="kButtonBranded kButton"
          [label]="'applications.settings.myUserSettings.save' | translate"
          [disabled]="_changePasswordForm.pristine"
          (click)="_updateLoginData()"></button>
      </div>
    </form>
  </div>

</k-area-blocker>
